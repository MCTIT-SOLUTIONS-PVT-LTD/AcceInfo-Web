@using Blazored.LocalStorage
@inherits LayoutComponentBase
@inject NavigationManager NavigationManager
@inject ILocalStorageService LocalStorage

<Header />
<div class="page-wrapper">
    <!--start page-wrapper-inner -->
    <div class="page-wrapper-inner">
        <Navbar />
    </div>
    <!--end page-wrapper-inner -->

    <div class="page-content">
       <div class="container-fluid">
           @Body
       </div>
       <Footer />
    </div>
</div>

@code {
    protected override async Task OnInitializedAsync()
    {
        var token = await LocalStorage.GetItemAsync<string>("auth_token");
        if (string.IsNullOrWhiteSpace(token))
        {
            NavigationManager.NavigateTo("/login", true);
        }
    }
}


@* <div id="blazor-error-ui" data-nosnippet>
    An unhandled error has occurred 123.
    <a href="." class="reload">Reload</a>
    <span class="dismiss">🗙</span>
</div> *@